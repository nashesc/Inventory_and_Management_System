<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Login - Inventory & Sales Management System</title>
   <link rel="preconnect" href="https://fonts.googleapis.com">
   <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
   <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
   <script src="https://kit.fontawesome.com/a72bc5f9a8.js" crossorigin="anonymous"></script>
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
   <link rel="stylesheet" href="./css/login.css">
</head>
<body>
   <header class="logo-container">
      <div class="logo-circle"></div>
      <h2 class="logo-text">Logo</h2>
   </header>

   <div class="login-card">
      <h1 class="title">Login</h1>

      <!-- Error message -->
      <div class="error-message" id="errorMessage" style="display: none;"></div>

      <form id="loginForm">
         <div class="input-username">
            <i class="bi bi-person"></i>
            <input type="text" id="username" placeholder="Username" required>
         </div>

         <div class="input-password">
            <i class="bi bi-lock"></i>
            <input type="password" id="password" placeholder="Password" required>
         </div>

         <div class="forgot-row">
            <a href="#" class="forgot">Forgot password?</a>
         </div>

         <button class="login-btn" type="submit">Login</button>
      </form>
      
      <div class="divider">
         <span></span>
         <p>Don't have an account?</p>
         <span></span>
      </div>

      <a href="#" class="contact">Contact us</a>
   </div>


   <script src="./js/transactionStorage.js"></script>
   <script src="./js/account-management.js"></script>
   <script>
      document.getElementById('loginForm').addEventListener('submit', (e) => {
         e.preventDefault();
         
         const username = document.getElementById('username').value;
         const password = document.getElementById('password').value;
         const errorMessage = document.getElementById('errorMessage');
         
         const result = accountManager.login(username, password);
         
         if (result.success) {
            // Successful login - redirect to dashboard
            window.location.href = './index.html';
         } else {
            // Show error message
            errorMessage.textContent = result.message;
            errorMessage.style.display = 'block';
            
            // Clear error after 3 seconds
            setTimeout(() => {
               errorMessage.style.display = 'none';
            }, 3000);
         }
      });
   </script>
</body>
</html>